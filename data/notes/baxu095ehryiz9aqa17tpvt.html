<h1 id="streams">Streams<a aria-hidden="true" class="anchor-heading icon-link" href="#streams"></a></h1>
<p>Framework for processing sequences of data in declarative and functional style.</p>
<p>Basically, you can specify an operation and perform it for all items in the collection.</p>
<h2 id="intermediate-operations">Intermediate Operations<a aria-hidden="true" class="anchor-heading icon-link" href="#intermediate-operations"></a></h2>
<p>Intermediate operations return a stream.</p>
<h3 id="filterpredicate"><code>filter</code>(<a href="/cs/notes/lx58207ls3auw10jnxmdcmj">Predicate</a>)<a aria-hidden="true" class="anchor-heading icon-link" href="#filterpredicate"></a></h3>
<p>Filters elements based on a condition.</p>
<pre class="language-java"><code class="language-java"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&#x3C;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> evens <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>n <span class="token operator">-></span> n <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="mapfunction"><code>map</code>(<a href="/cs/notes/gfq63atn6koxm8w8u1nb38b">Function</a>)<a aria-hidden="true" class="anchor-heading icon-link" href="#mapfunction"></a></h3>
<p>Transform each element of the stream.</p>
<pre class="language-java"><code class="language-java"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&#x3C;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> upperNames <span class="token operator">=</span> names<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                               <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token operator">::</span><span class="token function">toUpperCase</span><span class="token punctuation">)</span>
                               <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="flatmapfunction"><code>flatMap</code>(<a href="/cs/notes/gfq63atn6koxm8w8u1nb38b">Function</a>)<a aria-hidden="true" class="anchor-heading icon-link" href="#flatmapfunction"></a></h3>
<p>Flattens stream of streams into a single stream.</p>
<pre class="language-java"><code class="language-java"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&#x3C;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> allWords <span class="token operator">=</span> sentences<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                                 <span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>sentence <span class="token operator">-></span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>sentence<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                                 <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre>
<pre class="language-java"><code class="language-java"><span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&#x3C;</span><span class="token class-name">List</span><span class="token punctuation">&#x3C;</span><span class="token class-name">Integer</span><span class="token punctuation">></span><span class="token punctuation">></span></span> nestedStream <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&#x3C;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> flattenedStream <span class="token operator">=</span> nestedStream<span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token operator">::</span><span class="token function">stream</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="distinct"><code>distinct()</code><a aria-hidden="true" class="anchor-heading icon-link" href="#distinct"></a></h3>
<p>Removes duplicates.</p>
<pre class="language-java"><code class="language-java"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&#x3C;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> uniqueNumbers <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                                     <span class="token punctuation">.</span><span class="token function">distinct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                                     <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre>
<h3 id="sorted-and-sortedcomparator"><code>sorted()</code> and <code>sorted</code>(<a href="/cs/notes/ip5orztybk9shcn0qhjo7ms">Comparator</a>)<a aria-hidden="true" class="anchor-heading icon-link" href="#sorted-and-sortedcomparator"></a></h3>
<p>Sorts by natural order or by Comparator, if passed.</p>
<pre class="language-java"><code class="language-java"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&#x3C;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> sortedNames <span class="token operator">=</span> names<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                                <span class="token punctuation">.</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                                <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<pre class="language-java"><code class="language-java"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&#x3C;</span><span class="token class-name">Person</span><span class="token punctuation">></span></span> sortedByAge <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                                 <span class="token punctuation">.</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token class-name">Comparator</span><span class="token punctuation">.</span><span class="token function">comparing</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token operator">::</span><span class="token function">getAge</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                                 <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="peekconsumer"><code>peek</code>(<a href="/cs/notes/ae0jf8mu7bgpgcnnmf9c9vd">Consumer</a>)<a aria-hidden="true" class="anchor-heading icon-link" href="#peekconsumer"></a></h3>
<p>Performs an action on each element without altering the stream.</p>
<pre class="language-java"><code class="language-java">numbers<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
       <span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span>n <span class="token operator">-></span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Processing number: "</span> <span class="token operator">+</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span>
       <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="limitlong-n"><code>limit(long n)</code><a aria-hidden="true" class="anchor-heading icon-link" href="#limitlong-n"></a></h3>
<p>Limits the stream to first n elements.</p>
<pre class="language-java"><code class="language-java"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&#x3C;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> firstThree <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                                  <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
                                  <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="skiplong-n"><code>skip(long n)</code><a aria-hidden="true" class="anchor-heading icon-link" href="#skiplong-n"></a></h3>
<p>Skips the first n elements.</p>
<pre class="language-java"><code class="language-java"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&#x3C;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> withoutFirstTwo <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                                       <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
                                       <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre>
<h3 id="terminal-operations">Terminal Operations<a aria-hidden="true" class="anchor-heading icon-link" href="#terminal-operations"></a></h3>
<p>These operations consume the stream and return a result.</p>
<h3 id="foreachconsumer"><code>forEach</code>(<a href="/cs/notes/ae0jf8mu7bgpgcnnmf9c9vd">Consumer</a>)<a aria-hidden="true" class="anchor-heading icon-link" href="#foreachconsumer"></a></h3>
<p>Performs an operation for each element.</p>
<pre class="language-java"><code class="language-java">names<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="collectcollector"><code>collect(Collector)</code><a aria-hidden="true" class="anchor-heading icon-link" href="#collectcollector"></a></h3>
<p>Collects the stream into a collection.
Instance of Collector can be fetched from <a href="/cs/notes/un60lp44o0qon2nddvolalf">Collectors</a> API.</p>
<pre class="language-java"><code class="language-java"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&#x3C;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> collectedNames <span class="token operator">=</span> names<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="u-u-reduceu-identity-binaryoperator-accumulator"><code>&#x3C;U> U reduce(U identity,</code> <a href="/cs/notes/bqk8yqp4sz0wza0da1rnpru">BinaryOperator</a><code> accumulator)</code><a aria-hidden="true" class="anchor-heading icon-link" href="#u-u-reduceu-identity-binaryoperator-accumulator"></a></h3>
<p>Reduces stream to a single value.</p>
<ul>
<li><code>identity</code> value is used as the initial value</li>
<li><code>accumulator</code> function is used to combine all the elements.</li>
</ul>
<pre class="language-java"><code class="language-java"><span class="token keyword">int</span> sum <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                 <span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token operator">::</span><span class="token function">sum</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre>
<h3 id="toarray"><code>toArray()</code><a aria-hidden="true" class="anchor-heading icon-link" href="#toarray"></a></h3>
<p>Converts stream into array.</p>
<pre class="language-java"><code class="language-java"><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nameArray <span class="token operator">=</span> names<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="mincomparator-and--maxcomparator"><code>min</code>(<a href="/cs/notes/ip5orztybk9shcn0qhjo7ms">Comparator</a>) and  <code>max</code>(<a href="/cs/notes/ip5orztybk9shcn0qhjo7ms">Comparator</a>)<a aria-hidden="true" class="anchor-heading icon-link" href="#mincomparator-and--maxcomparator"></a></h3>
<pre class="language-java"><code class="language-java"><span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&#x3C;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> min <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                               <span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token class-name">Comparator</span><span class="token punctuation">.</span><span class="token function">naturalOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre>
<h3 id="count"><code>count()</code><a aria-hidden="true" class="anchor-heading icon-link" href="#count"></a></h3>
<pre class="language-java"><code class="language-java"><span class="token keyword">long</span> count <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="anymatchpredicate-allmatchpredicate-and-nonematchpredicate"><code>anyMatch</code>(<a href="/cs/notes/lx58207ls3auw10jnxmdcmj">Predicate</a>), <code>allMatch</code>(<a href="/cs/notes/lx58207ls3auw10jnxmdcmj">Predicate</a>) and <code>noneMatch</code>(<a href="/cs/notes/lx58207ls3auw10jnxmdcmj">Predicate</a>)<a aria-hidden="true" class="anchor-heading icon-link" href="#anymatchpredicate-allmatchpredicate-and-nonematchpredicate"></a></h3>
<pre class="language-java"><code class="language-java"><span class="token keyword">boolean</span> hasEven <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                         <span class="token punctuation">.</span><span class="token function">anyMatch</span><span class="token punctuation">(</span>n <span class="token operator">-></span> n <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="findfirst"><code>findFirst()</code><a aria-hidden="true" class="anchor-heading icon-link" href="#findfirst"></a></h3>
<pre class="language-java"><code class="language-java"><span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&#x3C;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> first <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                                 <span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre>
<h3 id="findany"><code>findAny()</code><a aria-hidden="true" class="anchor-heading icon-link" href="#findany"></a></h3>
<pre class="language-java"><code class="language-java"><span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&#x3C;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> any <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                               <span class="token punctuation">.</span><span class="token function">findAny</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre>
<hr>
<p>Introduced in <a href="/cs/notes/va87cklvt4f8fl4jm6s1xs8">Java 8</a></p>
<hr>
<strong>Backlinks</strong>
<ul>
<li><a href="/cs/notes/va87cklvt4f8fl4jm6s1xs8">Java 8 (cs)</a></li>
<li><a href="/cs/notes/un60lp44o0qon2nddvolalf">Collectors (cs)</a></li>
</ul>