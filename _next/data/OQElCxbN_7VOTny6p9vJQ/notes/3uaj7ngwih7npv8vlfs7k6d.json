{"pageProps":{"note":{"id":"3uaj7ngwih7npv8vlfs7k6d","title":"Thread Safety","desc":"","updated":1715103679960,"created":1713125526427,"custom":{},"fname":"lang.java.concurrency.multithreading.thread safety","type":"note","vault":{"fsPath":".","selfContained":true,"name":"cs"},"contentHash":"6a84b2182db9d5cf1ea65062b65bc62d","links":[{"type":"wiki","from":{"fname":"lang.java.concurrency.multithreading.thread safety","id":"3uaj7ngwih7npv8vlfs7k6d","vaultName":"cs"},"value":"execution.concurrency.multithreading.thread safety","position":{"start":{"line":4,"column":41,"offset":83},"end":{"line":4,"column":95,"offset":137},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"execution.concurrency.multithreading.thread safety"}},{"type":"wiki","from":{"fname":"lang.java.concurrency.multithreading.thread safety","id":"3uaj7ngwih7npv8vlfs7k6d","vaultName":"cs"},"value":"execution.concurrency.synchronization","position":{"start":{"line":4,"column":127,"offset":169},"end":{"line":4,"column":168,"offset":210},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"execution.concurrency.synchronization"}},{"type":"wiki","from":{"fname":"lang.java.concurrency.multithreading.thread safety","id":"3uaj7ngwih7npv8vlfs7k6d","vaultName":"cs"},"value":"lang.java.jre.jvm","position":{"start":{"line":31,"column":241,"offset":1149},"end":{"line":31,"column":262,"offset":1170},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"lang.java.jre.jvm"}}],"anchors":{"volatile-and-atomic":{"type":"header","text":"Volatile and Atomic","value":"volatile-and-atomic","line":35,"column":0,"depth":3}},"children":[],"parent":"jik03wh5g5jxxfz2aklbmub","data":{}},"body":"<h1 id=\"thread-safety\">Thread Safety<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#thread-safety\"></a></h1>\n<p>How to make a block of code thread safe?</p>\n<p>In addition to the usual ways to ensure <a href=\"/cs/notes/5mqyhqbl70k784qyd7mrkav\">Thread Safety</a>, Java provides some additional <a href=\"/cs/notes/3fnxobrsrcrbd4j3v6fz4wz\">Synchronization</a> mechanisms:</p>\n<ol>\n<li>\n<p>Thread local fields</p>\n<p>Defining private fields in Thread classes</p>\n<ul>\n<li>\n<p>Assigning ThreadLocal instances to a field</p>\n<p>  Like normal class fields but each thread accesses them via a setter-getter and gets independently initialized copy of the field so that each thread has its own state</p>\n</li>\n</ul>\n</li>\n<li>\n<p>Synchronized Collections</p>\n</li>\n<li>\n<p>Concurrent Collections</p>\n<p>Concurrent collections achieve thread safety by dividing their data into segments and acquiring locks on different segments.</p>\n<p>Better performance</p>\n</li>\n<li>\n<p>Atomic objects</p>\n</li>\n<li>\n<p>Synchronized Methods</p>\n</li>\n<li>\n<p>Synchronized statements</p>\n</li>\n<li>\n<p>Other objects as lock</p>\n</li>\n<li>\n<p>Volatile fields</p>\n</li>\n<li>\n<p>Reentrant locks</p>\n</li>\n<li>\n<p>Read/write locks</p>\n</li>\n</ol>\n<h3 id=\"volatile-and-atomic\">Volatile and Atomic<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#volatile-and-atomic\"></a></h3>\n<p><code>volatile</code> is used when there are two threads store and perform operations on same variable. In such case, both threads store the variable in different caches. This results in inaccuracy and inconsistency. Thus, the <code>volatile</code> keyword lets <a href=\"/cs/notes/y92rxfv7150ppi7fgius6g3\">JVM</a> know that this is variable is going to be changed and it is then stored in the common cache.</p>\n<p><code>AtomicInteger</code>, <code>AtomicLong</code> and other such classes are used in a similar situation to above, where the threads are accessing and performing some operation on a variable. If we don't define the variable as Atomic, it might happen that the second thread accesses the variable before the first thread is done performing operation on it. This causes inconsistency in the data. The <code>AtomicInteger</code> makes the integer thread safe by not letting any other thread access until one thread is done.</p>","noteIndex":{"id":"7ncn3al6mmutkhgoesulce9","title":"Computer Science","desc":"","updated":1715103618849,"created":1713296516553,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":".","selfContained":true,"name":"cs"},"contentHash":"36faf26c6be438d4aed355d72b55a110","links":[{"type":"wiki","from":{"fname":"root","id":"7ncn3al6mmutkhgoesulce9","vaultName":"cs"},"value":"arch","position":{"start":{"line":6,"column":3,"offset":105},"end":{"line":6,"column":11,"offset":113},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"arch"}},{"type":"wiki","from":{"fname":"root","id":"7ncn3al6mmutkhgoesulce9","vaultName":"cs"},"value":"paradigm","position":{"start":{"line":11,"column":3,"offset":159},"end":{"line":11,"column":15,"offset":171},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"paradigm"}}],"anchors":{"references":{"type":"header","text":"References","value":"references","line":23,"column":0,"depth":2}},"children":["0xgibr34qhbv1edksyoxakk","e5kuv5gcz6pdxrsakpf7eia","t246wcci6dy9lnof7l1os4l","71sipcgr0pdqyxnmntvx28w","5omh1zinw87le0eyms8g5mk","91er1wb2f5wmbdb5axx5r3r","9z7xt251y1nm9dy2exatukr","u712e7r8bk97hpg9h9j3m4f","xpf86eilma499o4ul566fk8","a1g6tjx0p6bp25v75262gp9","3pr5jo5c742vop6gnoe7c3k","stxoouqpk2rivotuvhjx4yz","g8tiwuotfnbfrbctwyfg8rc","jk63inaclv0ps5i7mktzmm2","5m1yclhdqeshe5szt0masfk","abgag3m7m74vmofvzyyt2fm"],"parent":null,"data":{},"body":"\n\nThese notes are arranged into the below topics:\n\n- AI (Sorry this is on the top, list is alphabetic)\n- [[arch]]\n- Data\n- Execution\n- Languages\n- Semantics\n- [[paradigm]]\n- Philosophy\n- Dev\n- Tools\n- Type Theory\n\n## References\n\n- Hierarchy inpiration - [Map of Computer Science](https://www.flickr.com/photos/95869671@N08/36231833334/in/photostream/lightbox/)"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true,"enableSelfContainedVaults":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"dependencies/github.com/chinootes/math","remote":{"type":"git","url":"git@github.com:chinootes/math.git"},"selfContained":true,"name":"math"},{"fsPath":".","selfContained":true,"name":"cs"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"task","dateFormat":"y.MM.dd","addBehavior":"asOwnDomain","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"taskCompleteStatus":["done","x"],"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"enableFullHierarchyNoteTitle":false,"enablePersistentHistory":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Dendron","description":"Personal Knowledge Space"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"search","siteUrl":"https://chinootes.github.io","assetsPrefix":"/cs","duplicateNoteBehavior":{"action":"useVault","payload":["math","cs"]},"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true}