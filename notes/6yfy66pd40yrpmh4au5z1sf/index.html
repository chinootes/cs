<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/cs/favicon.ico"/><title>Variance</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Personal Knowledge Space"/><meta property="og:title" content="Variance"/><meta property="og:description" content="Personal Knowledge Space"/><meta property="og:url" content="https://chinootes.github.io/cs/notes/6yfy66pd40yrpmh4au5z1sf/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2/18/2024"/><meta property="article:modified_time" content="2/19/2024"/><link rel="canonical" href="https://chinootes.github.io/cs/notes/6yfy66pd40yrpmh4au5z1sf/"/><meta name="next-head-count" content="14"/><link rel="preload" href="/cs/_next/static/css/896e35ac335ee88a.css" as="style"/><link rel="stylesheet" href="/cs/_next/static/css/896e35ac335ee88a.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/cs/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/cs/_next/static/chunks/webpack-114d62680617a3fa.js" defer=""></script><script src="/cs/_next/static/chunks/framework-28c999baf2863c3d.js" defer=""></script><script src="/cs/_next/static/chunks/main-909e1e4186772aeb.js" defer=""></script><script src="/cs/_next/static/chunks/pages/_app-13bb43f56c9a0d26.js" defer=""></script><script src="/cs/_next/static/chunks/935-4dee79e80b8641c6.js" defer=""></script><script src="/cs/_next/static/chunks/6-50972def09142ee2.js" defer=""></script><script src="/cs/_next/static/chunks/pages/notes/%5Bid%5D-78d472fa3b924116.js" defer=""></script><script src="/cs/_next/static/OQElCxbN_7VOTny6p9vJQ/_buildManifest.js" defer=""></script><script src="/cs/_next/static/OQElCxbN_7VOTny6p9vJQ/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><section class="ant-layout" style="width:100%;min-height:100%"><header class="ant-layout-header" style="position:fixed;isolation:isolate;z-index:1;width:100%;border-bottom:1px solid #d4dadf;height:64px;padding:0 24px 0 2px"><div class="ant-row ant-row-center" style="max-width:992px;justify-content:space-between;margin:0 auto"><div style="display:flex" class="ant-col ant-col-xs-20 ant-col-sm-4"></div><div class="ant-col gutter-row ant-col-xs-0 ant-col-sm-20 ant-col-md-20 ant-col-lg-19"><div class="ant-select ant-select-lg ant-select-auto-complete ant-select-single ant-select-allow-clear ant-select-show-search" style="width:100%"><div class="ant-select-selector"><span class="ant-select-selection-search"><input type="search" autoComplete="off" class="ant-select-selection-search-input" role="combobox" aria-haspopup="listbox" aria-owns="undefined_list" aria-autocomplete="list" aria-controls="undefined_list" aria-activedescendant="undefined_list_0" value=""/></span><span class="ant-select-selection-placeholder">For full text search please use the &#x27;?&#x27; prefix. e.g. ? Onboarding</span></div></div></div><div style="display:none;align-items:center;justify-content:center" class="ant-col ant-col-xs-4 ant-col-sm-4 ant-col-md-0 ant-col-lg-0"><span role="img" aria-label="menu" style="font-size:24px" tabindex="-1" class="anticon anticon-menu"><svg viewBox="64 64 896 896" focusable="false" data-icon="menu" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></span></div></div></header><section class="ant-layout" style="margin-top:64px;display:flex;flex-direction:row"><div class="site-layout-sidebar" style="flex:0 0 auto;width:calc(max((100% - 992px) / 2, 0px) + 200px);min-width:200px;padding-left:calc((100% - 992px) / 2)"><aside class="ant-layout-sider ant-layout-sider-dark" style="position:fixed;overflow:auto;height:calc(100vh - 64px);background-color:transparent;flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"></div></aside></div><main class="ant-layout-content side-layout-main" style="max-width:1200px;min-width:0;display:block"><div style="padding:0 24px"><div class="main-content" role="main"><div class="ant-row"><div class="ant-col ant-col-24"><div class="ant-row" style="margin-left:-10px;margin-right:-10px"><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-24 ant-col-md-18"><div><h1 id="variance">Variance<a aria-hidden="true" class="anchor-heading icon-link" href="#variance"></a></h1>
<p>Variance defines how the type relations of complex types will vary or hold in their components( entities and components in programming languages like enumerables (enums), functions, arrays, lists etc).</p>
<p>We know how <a href="/cs/notes/xfut1n2v6d1ivozx0wxbb4l">Substitutability</a> works in case of objects. This kind of replacement can also be done with the components of these types. This is called variance.</p>
<ul>
<li>When objects are replaced — substitutability</li>
<li>When components are replaced — variance</li>
</ul>
<p>For example, a type Cat and Animal, where Animal is parent (or whatever) of Cat. Variance defines how the subtypes of Cat and subtypes of Animal will either hold or deviate from this relation.</p>
<p>The relation is:</p>
<ul>
<li><strong>variant</strong> if the relation is somehow carried on to the components or children, either holding the relation or reversing the relation.
<ul>
<li><strong>covariant</strong> if it preserves the ordering of types.</li>
<li><strong>contravariant</strong> if it reverses this order. </li>
<li><strong>bivariant</strong> if both of the above apply</li>
</ul>
</li>
<li><strong>invariant</strong> or <strong>nonvariant</strong> if the relation is not carried on to the components or children.</li>
</ul>
<h2 id="thoughts-on-deciding-variance">Thoughts on deciding variance<a aria-hidden="true" class="anchor-heading icon-link" href="#thoughts-on-deciding-variance"></a></h2>
<p>While designing any type system, variance is considered by the designer. </p>
<ul>
<li>Contravariance is usually considered unintuitive by programmers. This can lead to complex typing rules.</li>
<li>If the type system is variant, the type system is considered to be well-typed.</li>
<li>Sometimes the designer will choose to keep it invariant to keep the type system simple. But this could voilate type-safety.</li>
</ul>
<hr>
<strong>Backlinks</strong>
<ul>
<li><a href="/cs/notes/4gybc2jwtoeox3ki500srhd">Covariant Return Type (cs)</a></li>
<li><a href="/cs/notes/v0qiwwnyak1v608xe3u7dm9">Exception declaration with Method overriding (cs)</a></li>
</ul></div></div><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-0 ant-col-md-6"><div><div class=""><div class="ant-anchor-wrapper dendron-toc" style="max-height:calc(100vh - 64px);z-index:1"><div class="ant-anchor"><div class="ant-anchor-ink"><span class="ant-anchor-ink-ball"></span></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#thoughts-on-deciding-variance" title="Thoughts on deciding variance">Thoughts on deciding variance</a></div></div></div></div></div></div></div></div></div></div></div><div class="ant-divider ant-divider-horizontal" role="separator"></div><footer class="ant-layout-footer" style="padding:0 24px 24px"></footer></main></section></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"id":"6yfy66pd40yrpmh4au5z1sf","title":"Variance","desc":"","updated":1708358297412,"created":1708237966152,"custom":{},"fname":"type theory.variance","type":"note","vault":{"fsPath":".","selfContained":true,"name":"cs"},"contentHash":"94d87fe840c612b1fc26dc8e8b6ee47a","links":[{"type":"wiki","from":{"fname":"type theory.variance","id":"6yfy66pd40yrpmh4au5z1sf","vaultName":"cs"},"value":"type theory.substitutability","position":{"start":{"line":5,"column":13,"offset":217},"end":{"line":5,"column":45,"offset":249},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"type theory.substitutability"}},{"from":{"fname":"paradigm.oo.components.covariant return type","id":"4gybc2jwtoeox3ki500srhd","vaultName":"cs"},"type":"backlink","position":{"start":{"line":3,"column":6,"offset":7},"end":{"line":3,"column":30,"offset":31},"indent":[]},"value":"type theory.variance"},{"from":{"fname":"paradigm.oo.principles.polymorphism.overriding.exception declaration","id":"v0qiwwnyak1v608xe3u7dm9","vaultName":"cs"},"type":"backlink","position":{"start":{"line":17,"column":25,"offset":452},"end":{"line":17,"column":49,"offset":476},"indent":[]},"value":"type theory.variance"}],"anchors":{"thoughts-on-deciding-variance":{"type":"header","text":"Thoughts on deciding variance","value":"thoughts-on-deciding-variance","line":26,"column":0,"depth":2}},"children":[],"parent":"stxoouqpk2rivotuvhjx4yz","data":{}},"body":"\u003ch1 id=\"variance\"\u003eVariance\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#variance\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cp\u003eVariance defines how the type relations of complex types will vary or hold in their components( entities and components in programming languages like enumerables (enums), functions, arrays, lists etc).\u003c/p\u003e\n\u003cp\u003eWe know how \u003ca href=\"/cs/notes/xfut1n2v6d1ivozx0wxbb4l\"\u003eSubstitutability\u003c/a\u003e works in case of objects. This kind of replacement can also be done with the components of these types. This is called variance.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eWhen objects are replaced — substitutability\u003c/li\u003e\n\u003cli\u003eWhen components are replaced — variance\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eFor example, a type Cat and Animal, where Animal is parent (or whatever) of Cat. Variance defines how the subtypes of Cat and subtypes of Animal will either hold or deviate from this relation.\u003c/p\u003e\n\u003cp\u003eThe relation is:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003evariant\u003c/strong\u003e if the relation is somehow carried on to the components or children, either holding the relation or reversing the relation.\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003ecovariant\u003c/strong\u003e if it preserves the ordering of types.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003econtravariant\u003c/strong\u003e if it reverses this order. \u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ebivariant\u003c/strong\u003e if both of the above apply\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003einvariant\u003c/strong\u003e or \u003cstrong\u003enonvariant\u003c/strong\u003e if the relation is not carried on to the components or children.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"thoughts-on-deciding-variance\"\u003eThoughts on deciding variance\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#thoughts-on-deciding-variance\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eWhile designing any type system, variance is considered by the designer. \u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eContravariance is usually considered unintuitive by programmers. This can lead to complex typing rules.\u003c/li\u003e\n\u003cli\u003eIf the type system is variant, the type system is considered to be well-typed.\u003c/li\u003e\n\u003cli\u003eSometimes the designer will choose to keep it invariant to keep the type system simple. But this could voilate type-safety.\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003cstrong\u003eBacklinks\u003c/strong\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/cs/notes/4gybc2jwtoeox3ki500srhd\"\u003eCovariant Return Type (cs)\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/cs/notes/v0qiwwnyak1v608xe3u7dm9\"\u003eException declaration with Method overriding (cs)\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","noteIndex":{"id":"7ncn3al6mmutkhgoesulce9","title":"Computer Science","desc":"","updated":1715103618849,"created":1713296516553,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":".","selfContained":true,"name":"cs"},"contentHash":"36faf26c6be438d4aed355d72b55a110","links":[{"type":"wiki","from":{"fname":"root","id":"7ncn3al6mmutkhgoesulce9","vaultName":"cs"},"value":"arch","position":{"start":{"line":6,"column":3,"offset":105},"end":{"line":6,"column":11,"offset":113},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"arch"}},{"type":"wiki","from":{"fname":"root","id":"7ncn3al6mmutkhgoesulce9","vaultName":"cs"},"value":"paradigm","position":{"start":{"line":11,"column":3,"offset":159},"end":{"line":11,"column":15,"offset":171},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"paradigm"}}],"anchors":{"references":{"type":"header","text":"References","value":"references","line":23,"column":0,"depth":2}},"children":["0xgibr34qhbv1edksyoxakk","e5kuv5gcz6pdxrsakpf7eia","t246wcci6dy9lnof7l1os4l","71sipcgr0pdqyxnmntvx28w","5omh1zinw87le0eyms8g5mk","91er1wb2f5wmbdb5axx5r3r","9z7xt251y1nm9dy2exatukr","u712e7r8bk97hpg9h9j3m4f","xpf86eilma499o4ul566fk8","a1g6tjx0p6bp25v75262gp9","3pr5jo5c742vop6gnoe7c3k","stxoouqpk2rivotuvhjx4yz","g8tiwuotfnbfrbctwyfg8rc","jk63inaclv0ps5i7mktzmm2","5m1yclhdqeshe5szt0masfk","abgag3m7m74vmofvzyyt2fm"],"parent":null,"data":{},"body":"\n\nThese notes are arranged into the below topics:\n\n- AI (Sorry this is on the top, list is alphabetic)\n- [[arch]]\n- Data\n- Execution\n- Languages\n- Semantics\n- [[paradigm]]\n- Philosophy\n- Dev\n- Tools\n- Type Theory\n\n## References\n\n- Hierarchy inpiration - [Map of Computer Science](https://www.flickr.com/photos/95869671@N08/36231833334/in/photostream/lightbox/)"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true,"enableSelfContainedVaults":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"dependencies/github.com/chinootes/math","remote":{"type":"git","url":"git@github.com:chinootes/math.git"},"selfContained":true,"name":"math"},{"fsPath":".","selfContained":true,"name":"cs"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"task","dateFormat":"y.MM.dd","addBehavior":"asOwnDomain","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"taskCompleteStatus":["done","x"],"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"enableFullHierarchyNoteTitle":false,"enablePersistentHistory":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Dendron","description":"Personal Knowledge Space"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"search","siteUrl":"https://chinootes.github.io","assetsPrefix":"/cs","duplicateNoteBehavior":{"action":"useVault","payload":["math","cs"]},"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"6yfy66pd40yrpmh4au5z1sf"},"buildId":"OQElCxbN_7VOTny6p9vJQ","assetPrefix":"/cs","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>