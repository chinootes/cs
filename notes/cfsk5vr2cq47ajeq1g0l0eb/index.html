<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/cs/favicon.ico"/><title>Singleton</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Personal Knowledge Space"/><meta property="og:title" content="Singleton"/><meta property="og:description" content="Personal Knowledge Space"/><meta property="og:url" content="https://chinootes.github.io/cs/notes/cfsk5vr2cq47ajeq1g0l0eb/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2/20/2024"/><meta property="article:modified_time" content="2/20/2024"/><link rel="canonical" href="https://chinootes.github.io/cs/notes/cfsk5vr2cq47ajeq1g0l0eb/"/><meta name="next-head-count" content="14"/><link rel="preload" href="/cs/_next/static/css/896e35ac335ee88a.css" as="style"/><link rel="stylesheet" href="/cs/_next/static/css/896e35ac335ee88a.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/cs/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/cs/_next/static/chunks/webpack-114d62680617a3fa.js" defer=""></script><script src="/cs/_next/static/chunks/framework-28c999baf2863c3d.js" defer=""></script><script src="/cs/_next/static/chunks/main-909e1e4186772aeb.js" defer=""></script><script src="/cs/_next/static/chunks/pages/_app-13bb43f56c9a0d26.js" defer=""></script><script src="/cs/_next/static/chunks/935-4dee79e80b8641c6.js" defer=""></script><script src="/cs/_next/static/chunks/6-50972def09142ee2.js" defer=""></script><script src="/cs/_next/static/chunks/pages/notes/%5Bid%5D-78d472fa3b924116.js" defer=""></script><script src="/cs/_next/static/OQElCxbN_7VOTny6p9vJQ/_buildManifest.js" defer=""></script><script src="/cs/_next/static/OQElCxbN_7VOTny6p9vJQ/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><section class="ant-layout" style="width:100%;min-height:100%"><header class="ant-layout-header" style="position:fixed;isolation:isolate;z-index:1;width:100%;border-bottom:1px solid #d4dadf;height:64px;padding:0 24px 0 2px"><div class="ant-row ant-row-center" style="max-width:992px;justify-content:space-between;margin:0 auto"><div style="display:flex" class="ant-col ant-col-xs-20 ant-col-sm-4"></div><div class="ant-col gutter-row ant-col-xs-0 ant-col-sm-20 ant-col-md-20 ant-col-lg-19"><div class="ant-select ant-select-lg ant-select-auto-complete ant-select-single ant-select-allow-clear ant-select-show-search" style="width:100%"><div class="ant-select-selector"><span class="ant-select-selection-search"><input type="search" autoComplete="off" class="ant-select-selection-search-input" role="combobox" aria-haspopup="listbox" aria-owns="undefined_list" aria-autocomplete="list" aria-controls="undefined_list" aria-activedescendant="undefined_list_0" value=""/></span><span class="ant-select-selection-placeholder">For full text search please use the &#x27;?&#x27; prefix. e.g. ? Onboarding</span></div></div></div><div style="display:none;align-items:center;justify-content:center" class="ant-col ant-col-xs-4 ant-col-sm-4 ant-col-md-0 ant-col-lg-0"><span role="img" aria-label="menu" style="font-size:24px" tabindex="-1" class="anticon anticon-menu"><svg viewBox="64 64 896 896" focusable="false" data-icon="menu" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></span></div></div></header><section class="ant-layout" style="margin-top:64px;display:flex;flex-direction:row"><div class="site-layout-sidebar" style="flex:0 0 auto;width:calc(max((100% - 992px) / 2, 0px) + 200px);min-width:200px;padding-left:calc((100% - 992px) / 2)"><aside class="ant-layout-sider ant-layout-sider-dark" style="position:fixed;overflow:auto;height:calc(100vh - 64px);background-color:transparent;flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"></div></aside></div><main class="ant-layout-content side-layout-main" style="max-width:1200px;min-width:0;display:block"><div style="padding:0 24px"><div class="main-content" role="main"><div class="ant-row"><div class="ant-col ant-col-24"><div class="ant-row" style="margin-left:-10px;margin-right:-10px"><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-24 ant-col-md-18"><div><h1 id="singleton">Singleton<a aria-hidden="true" class="anchor-heading icon-link" href="#singleton"></a></h1>
<p><a href="/cs/notes/pakdzkludowl4h6pf8xuiap">Creational Design Pattern</a> in which only one instance of a class is allowed.</p>
<h2 id="what-is-a-singleton-class">What is a <strong>Singleton class?</strong><a aria-hidden="true" class="anchor-heading icon-link" href="#what-is-a-singleton-class"></a></h2>
<p>Only one instance is allowed</p>
<h2 id="how-to-implement-it">How to implement it?<a aria-hidden="true" class="anchor-heading icon-link" href="#how-to-implement-it"></a></h2>
<p>To only allow one instance for your class:</p>
<ol>
<li>Create a static object of a class within the class</li>
<li>Make default constructor private</li>
<li>Create a static method which returns an instance of your class</li>
</ol>
<pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Abc</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Abc</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Abc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> i<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Abc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Abc</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Now, the only way an instance of this class can be obtained is through this method and since the method is static, it will return the same static instance which was the member of your class.</p>
<h2 id="why-is-this-implementation-eager">Why is this implementation eager?<a aria-hidden="true" class="anchor-heading icon-link" href="#why-is-this-implementation-eager"></a></h2>
<p>This instance of the class will be created as soon as the class is loaded in the memory. It will be global and will be there in the memory even if its not used.</p>
<h2 id="how-to-make-it-lazy">How to make it lazy?<a aria-hidden="true" class="anchor-heading icon-link" href="#how-to-make-it-lazy"></a></h2>
<p>Instead of creating, if you just declare the object in the class and create it inside the function, it will become lazy. But this will mean that every time your function is called, it will return a new object. Hence, the class won't be singleton anymore.</p>
<pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Abc</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Abc</span> obj<span class="token punctuation">;</span>
    <span class="token keyword">int</span> i<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Abc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Abc</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Abc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// new object eveytime the function is called</span>
        <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>To prevent this, put the initialisation of object into an if condition which checks whether the object is null or not. → This will only create the object, the first time the function is called. Else it will return the old object.</p>
<pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Abc</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Abc</span> obj<span class="token punctuation">;</span>
    <span class="token keyword">int</span> i<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Abc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Abc</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>obj <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Abc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// new object created only for the first time</span>
        <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Although this won't work if simultaneous calls are made to the method from multiple threads.</p>
<h2 id="how-to-make-it-thread-safe">How to make it thread safe?<a aria-hidden="true" class="anchor-heading icon-link" href="#how-to-make-it-thread-safe"></a></h2>
<p>You can make your method <em>synchronized</em> to resolve this issue. But this will slow down your app.</p>
<pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Abc</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Abc</span> obj<span class="token punctuation">;</span>
    <span class="token keyword">int</span> i<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Abc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">synchronized</span> <span class="token class-name">Abc</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>obj <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Abc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// new object created only for the first time</span>
        <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>To solve this, you can perform a double checked locking. That is, don't put synchronize on the function but inside the function. Check if the object is null - twice. Once inside a synchronized block and once outside.</p>
<pre class="language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Abc</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Abc</span> obj<span class="token punctuation">;</span>
    <span class="token keyword">int</span> i<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Abc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Abc</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>obj <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">synchronized</span><span class="token punctuation">(</span><span class="token class-name">Abc</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>obj<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span> 
                    obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Abc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="what-is-the-best-way-to-implement-a-singleton-class">What is the best way to implement a Singleton class?<a aria-hidden="true" class="anchor-heading icon-link" href="#what-is-the-best-way-to-implement-a-singleton-class"></a></h2>
<pre class="language-sql"><code class="language-sql"><span class="token keyword">enum</span> Abc {
    INSTANCE<span class="token punctuation">;</span>
}
</code></pre>
<h2 id="why-is-singleton-patternclass-used">Why is Singleton pattern/class used?<a aria-hidden="true" class="anchor-heading icon-link" href="#why-is-singleton-patternclass-used"></a></h2>
<p>It is used to provide global point of access to an object. So it can be used in logging, caches, thread pools, configuration settings, device driver objects. Basically, wherever there is a possibility of multiple clients or users accessing and initializing a new object and we don't want that - Singleton design is used.</p>
<h2 id="why-not-create-a-static-class-for-such-requirements">Why not create a static class for such requirements?<a aria-hidden="true" class="anchor-heading icon-link" href="#why-not-create-a-static-class-for-such-requirements"></a></h2>
<ul>
<li>Singleton can implement interfaces and extend classes</li>
<li>Static class will have only static members</li>
<li>Can be lazily loaded. Static will be initialized when first loaded.</li>
<li>Stored in heap, static stored in stack</li>
<li>Clonable</li>
<li>Can use OO feature of polymorphism</li>
</ul>
<hr>
<strong>Backlinks</strong>
<ul>
<li><a href="/cs/notes/cvg20laazosxudo0dz0nm8d">Factory (cs)</a></li>
</ul></div></div><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-0 ant-col-md-6"><div><div class=""><div class="ant-anchor-wrapper dendron-toc" style="max-height:calc(100vh - 64px);z-index:1"><div class="ant-anchor"><div class="ant-anchor-ink"><span class="ant-anchor-ink-ball"></span></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#what-is-a-singleton-class" title="What is a Singleton class?">What is a Singleton class?</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#how-to-implement-it" title="How to implement it?">How to implement it?</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#why-is-this-implementation-eager" title="Why is this implementation eager?">Why is this implementation eager?</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#how-to-make-it-lazy" title="How to make it lazy?">How to make it lazy?</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#how-to-make-it-thread-safe" title="How to make it thread safe?">How to make it thread safe?</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#what-is-the-best-way-to-implement-a-singleton-class" title="What is the best way to implement a Singleton class?">What is the best way to implement a Singleton class?</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#why-is-singleton-patternclass-used" title="Why is Singleton pattern/class used?">Why is Singleton pattern/class used?</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#why-not-create-a-static-class-for-such-requirements" title="Why not create a static class for such requirements?">Why not create a static class for such requirements?</a></div></div></div></div></div></div></div></div></div></div></div><div class="ant-divider ant-divider-horizontal" role="separator"></div><footer class="ant-layout-footer" style="padding:0 24px 24px"></footer></main></section></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"id":"cfsk5vr2cq47ajeq1g0l0eb","title":"Singleton","desc":"","updated":1708449165922,"created":1708449071932,"custom":{},"fname":"arch.design.oo.patterns.gof.creational.singleton","type":"note","vault":{"fsPath":".","selfContained":true,"name":"cs"},"contentHash":"f58e1cb9c2880080817f9dfb5981e1a4","links":[{"type":"wiki","from":{"fname":"arch.design.oo.patterns.gof.creational.singleton","id":"cfsk5vr2cq47ajeq1g0l0eb","vaultName":"cs"},"value":"arch.design.oo.patterns.gof.creational","position":{"start":{"line":3,"column":1,"offset":2},"end":{"line":3,"column":43,"offset":44},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"arch.design.oo.patterns.gof.creational"}},{"from":{"fname":"arch.design.oo.patterns.gof.creational.factory","id":"cvg20laazosxudo0dz0nm8d","vaultName":"cs"},"type":"backlink","position":{"start":{"line":13,"column":42,"offset":379},"end":{"line":13,"column":94,"offset":431},"indent":[]},"value":"arch.design.oo.patterns.gof.creational.singleton"}],"anchors":{"what-is-a-singleton-class":{"type":"header","text":"What is a Singleton class?","value":"what-is-a-singleton-class","line":11,"column":0,"depth":2},"how-to-implement-it":{"type":"header","text":"How to implement it?","value":"how-to-implement-it","line":15,"column":0,"depth":2},"why-is-this-implementation-eager":{"type":"header","text":"Why is this implementation eager?","value":"why-is-this-implementation-eager","line":36,"column":0,"depth":2},"how-to-make-it-lazy":{"type":"header","text":"How to make it lazy?","value":"how-to-make-it-lazy","line":40,"column":0,"depth":2},"how-to-make-it-thread-safe":{"type":"header","text":"How to make it thread safe?","value":"how-to-make-it-thread-safe","line":72,"column":0,"depth":2},"what-is-the-best-way-to-implement-a-singleton-class":{"type":"header","text":"What is the best way to implement a Singleton class?","value":"what-is-the-best-way-to-implement-a-singleton-class","line":107,"column":0,"depth":2},"why-is-singleton-patternclass-used":{"type":"header","text":"Why is Singleton pattern/class used?","value":"why-is-singleton-patternclass-used","line":115,"column":0,"depth":2},"why-not-create-a-static-class-for-such-requirements":{"type":"header","text":"Why not create a static class for such requirements?","value":"why-not-create-a-static-class-for-such-requirements","line":119,"column":0,"depth":2}},"children":[],"parent":"pakdzkludowl4h6pf8xuiap","data":{}},"body":"\u003ch1 id=\"singleton\"\u003eSingleton\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#singleton\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cp\u003e\u003ca href=\"/cs/notes/pakdzkludowl4h6pf8xuiap\"\u003eCreational Design Pattern\u003c/a\u003e in which only one instance of a class is allowed.\u003c/p\u003e\n\u003ch2 id=\"what-is-a-singleton-class\"\u003eWhat is a \u003cstrong\u003eSingleton class?\u003c/strong\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#what-is-a-singleton-class\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eOnly one instance is allowed\u003c/p\u003e\n\u003ch2 id=\"how-to-implement-it\"\u003eHow to implement it?\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#how-to-implement-it\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eTo only allow one instance for your class:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eCreate a static object of a class within the class\u003c/li\u003e\n\u003cli\u003eMake default constructor private\u003c/li\u003e\n\u003cli\u003eCreate a static method which returns an instance of your class\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre class=\"language-java\"\u003e\u003ccode class=\"language-java\"\u003e\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAbc\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAbc\u003c/span\u003e obj \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAbc\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eint\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAbc\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAbc\u003c/span\u003e \u003cspan class=\"token function\"\u003egetInstance\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e obj\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow, the only way an instance of this class can be obtained is through this method and since the method is static, it will return the same static instance which was the member of your class.\u003c/p\u003e\n\u003ch2 id=\"why-is-this-implementation-eager\"\u003eWhy is this implementation eager?\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#why-is-this-implementation-eager\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eThis instance of the class will be created as soon as the class is loaded in the memory. It will be global and will be there in the memory even if its not used.\u003c/p\u003e\n\u003ch2 id=\"how-to-make-it-lazy\"\u003eHow to make it lazy?\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#how-to-make-it-lazy\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eInstead of creating, if you just declare the object in the class and create it inside the function, it will become lazy. But this will mean that every time your function is called, it will return a new object. Hence, the class won't be singleton anymore.\u003c/p\u003e\n\u003cpre class=\"language-java\"\u003e\u003ccode class=\"language-java\"\u003e\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAbc\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAbc\u003c/span\u003e obj\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eint\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAbc\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAbc\u003c/span\u003e \u003cspan class=\"token function\"\u003egetInstance\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        obj \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAbc\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// new object eveytime the function is called\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e obj\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTo prevent this, put the initialisation of object into an if condition which checks whether the object is null or not. → This will only create the object, the first time the function is called. Else it will return the old object.\u003c/p\u003e\n\u003cpre class=\"language-java\"\u003e\u003ccode class=\"language-java\"\u003e\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAbc\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAbc\u003c/span\u003e obj\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eint\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAbc\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAbc\u003c/span\u003e \u003cspan class=\"token function\"\u003egetInstance\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eobj \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enull\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e obj \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAbc\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// new object created only for the first time\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e obj\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAlthough this won't work if simultaneous calls are made to the method from multiple threads.\u003c/p\u003e\n\u003ch2 id=\"how-to-make-it-thread-safe\"\u003eHow to make it thread safe?\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#how-to-make-it-thread-safe\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eYou can make your method \u003cem\u003esynchronized\u003c/em\u003e to resolve this issue. But this will slow down your app.\u003c/p\u003e\n\u003cpre class=\"language-java\"\u003e\u003ccode class=\"language-java\"\u003e\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAbc\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAbc\u003c/span\u003e obj\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eint\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAbc\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003esynchronized\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAbc\u003c/span\u003e \u003cspan class=\"token function\"\u003egetInstance\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eobj \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enull\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e obj \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAbc\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// new object created only for the first time\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e obj\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTo solve this, you can perform a double checked locking. That is, don't put synchronize on the function but inside the function. Check if the object is null - twice. Once inside a synchronized block and once outside.\u003c/p\u003e\n\u003cpre class=\"language-java\"\u003e\u003ccode class=\"language-java\"\u003e\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAbc\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAbc\u003c/span\u003e obj\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eint\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAbc\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAbc\u003c/span\u003e \u003cspan class=\"token function\"\u003egetInstance\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eobj \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enull\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"token keyword\"\u003esynchronized\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eAbc\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eobj\u003cspan class=\"token operator\"\u003e==\u003c/span\u003e\u003cspan class=\"token keyword\"\u003enull\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \n                    obj \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAbc\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \n            \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e obj\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"what-is-the-best-way-to-implement-a-singleton-class\"\u003eWhat is the best way to implement a Singleton class?\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#what-is-the-best-way-to-implement-a-singleton-class\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cpre class=\"language-sql\"\u003e\u003ccode class=\"language-sql\"\u003e\u003cspan class=\"token keyword\"\u003eenum\u003c/span\u003e Abc {\n    INSTANCE\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"why-is-singleton-patternclass-used\"\u003eWhy is Singleton pattern/class used?\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#why-is-singleton-patternclass-used\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eIt is used to provide global point of access to an object. So it can be used in logging, caches, thread pools, configuration settings, device driver objects. Basically, wherever there is a possibility of multiple clients or users accessing and initializing a new object and we don't want that - Singleton design is used.\u003c/p\u003e\n\u003ch2 id=\"why-not-create-a-static-class-for-such-requirements\"\u003eWhy not create a static class for such requirements?\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#why-not-create-a-static-class-for-such-requirements\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eSingleton can implement interfaces and extend classes\u003c/li\u003e\n\u003cli\u003eStatic class will have only static members\u003c/li\u003e\n\u003cli\u003eCan be lazily loaded. Static will be initialized when first loaded.\u003c/li\u003e\n\u003cli\u003eStored in heap, static stored in stack\u003c/li\u003e\n\u003cli\u003eClonable\u003c/li\u003e\n\u003cli\u003eCan use OO feature of polymorphism\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003cstrong\u003eBacklinks\u003c/strong\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/cs/notes/cvg20laazosxudo0dz0nm8d\"\u003eFactory (cs)\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","noteIndex":{"id":"7ncn3al6mmutkhgoesulce9","title":"Computer Science","desc":"","updated":1715103618849,"created":1713296516553,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":".","selfContained":true,"name":"cs"},"contentHash":"36faf26c6be438d4aed355d72b55a110","links":[{"type":"wiki","from":{"fname":"root","id":"7ncn3al6mmutkhgoesulce9","vaultName":"cs"},"value":"arch","position":{"start":{"line":6,"column":3,"offset":105},"end":{"line":6,"column":11,"offset":113},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"arch"}},{"type":"wiki","from":{"fname":"root","id":"7ncn3al6mmutkhgoesulce9","vaultName":"cs"},"value":"paradigm","position":{"start":{"line":11,"column":3,"offset":159},"end":{"line":11,"column":15,"offset":171},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"paradigm"}}],"anchors":{"references":{"type":"header","text":"References","value":"references","line":23,"column":0,"depth":2}},"children":["0xgibr34qhbv1edksyoxakk","e5kuv5gcz6pdxrsakpf7eia","t246wcci6dy9lnof7l1os4l","71sipcgr0pdqyxnmntvx28w","5omh1zinw87le0eyms8g5mk","91er1wb2f5wmbdb5axx5r3r","9z7xt251y1nm9dy2exatukr","u712e7r8bk97hpg9h9j3m4f","xpf86eilma499o4ul566fk8","a1g6tjx0p6bp25v75262gp9","3pr5jo5c742vop6gnoe7c3k","stxoouqpk2rivotuvhjx4yz","g8tiwuotfnbfrbctwyfg8rc","jk63inaclv0ps5i7mktzmm2","5m1yclhdqeshe5szt0masfk","abgag3m7m74vmofvzyyt2fm"],"parent":null,"data":{},"body":"\n\nThese notes are arranged into the below topics:\n\n- AI (Sorry this is on the top, list is alphabetic)\n- [[arch]]\n- Data\n- Execution\n- Languages\n- Semantics\n- [[paradigm]]\n- Philosophy\n- Dev\n- Tools\n- Type Theory\n\n## References\n\n- Hierarchy inpiration - [Map of Computer Science](https://www.flickr.com/photos/95869671@N08/36231833334/in/photostream/lightbox/)"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true,"enableSelfContainedVaults":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"dependencies/github.com/chinootes/math","remote":{"type":"git","url":"git@github.com:chinootes/math.git"},"selfContained":true,"name":"math"},{"fsPath":".","selfContained":true,"name":"cs"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"task","dateFormat":"y.MM.dd","addBehavior":"asOwnDomain","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"taskCompleteStatus":["done","x"],"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"enableFullHierarchyNoteTitle":false,"enablePersistentHistory":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Dendron","description":"Personal Knowledge Space"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"search","siteUrl":"https://chinootes.github.io","assetsPrefix":"/cs","duplicateNoteBehavior":{"action":"useVault","payload":["math","cs"]},"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"cfsk5vr2cq47ajeq1g0l0eb"},"buildId":"OQElCxbN_7VOTny6p9vJQ","assetPrefix":"/cs","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>